# –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ 12
## –®–∏—à–∫–æ–≤ –ê.–î. –≠–§–ú–û-02-22
## –¢–µ–º–∞
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Swagger/OpenAPI. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ 
## –¶–µ–ª–∏
- –û—Å–≤–æ–∏—Ç—å –æ—Å–Ω–æ–≤—ã —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ OpenAPI (Swagger) –¥–ª—è REST API.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –ø—Ä–æ–µ–∫—Ç—É –∏–∑ –ü–ó 11 (notes-api).
- –ù–∞—É—á–∏—Ç—å—Å—è –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (Swagger UI / ReDoc) –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ GET /docs.
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏-–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è) –∏/–∏–ª–∏ ¬´schema-first¬ª (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –∏–∑ openapi.yaml).
- –æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Makefile/—Å–∫—Ä–∏–ø—Ç).
### –ü–æ–¥—Ö–æ–¥: Code-First

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **code-first –ø–æ–¥—Ö–æ–¥** —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º **swag** ‚Äî Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –≤ Go-–∫–æ–¥–µ.

| –ü–æ–¥—Ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ |
|--------|----------|------------------------|
| **Code-first** | –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤ –∫–æ–¥–µ ‚Üí `swag init` ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è `docs/` | –¥–∞ |
| **Schema-first** | OpenAPI YAML/JSON ‚Üí `oapi-codegen` ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ | –Ω–µ—Ç |
| **Embedded Spec** | –†—É—á–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –∫–æ–¥–µ | –Ω–µ—Ç |

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ code-first –ø–æ–¥—Ö–æ–¥–∞:**
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–¥—É (Single Source of Truth)
- –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º ‚Äî –ª–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ Go-—Å—Ç—Ä—É–∫—Ç—É—Ä
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ —Ç–µ–≥–∏

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- [swaggo/swag](https://github.com/swaggo/swag) ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [swaggo/http-swagger](https://github.com/swaggo/http-swagger) ‚Äî middleware –¥–ª—è Swagger UI

---

## 2. –§—Ä–∞–≥–º–µ–Ω—Ç—ã –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –Ω–∞–¥ –º–µ—Ç–æ–¥–∞–º–∏

### –ì–ª–∞–≤–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ API

> **–§–∞–π–ª:** `cmd/api/main.go` (—Å—Ç—Ä–æ–∫–∏ 16-24)

```go
// @title Notes API
// @version 1.0
// @description –£—á–µ–±–Ω—ã–π REST API –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ (CRUD) –¥–ª—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è ‚Ññ12.
// @description –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è code-first –ø–æ–¥—Ö–æ–¥–∞ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ swag.

// @host localhost:8080
// @BasePath /api/v1

// @schemes http
```

**–†–∞–∑–±–æ—Ä –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π:**
| –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|
| `@title` | –ù–∞–∑–≤–∞–Ω–∏–µ API (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —à–∞–ø–∫–µ Swagger UI) |
| `@version` | –í–µ—Ä—Å–∏—è API |
| `@description` | –û–ø–∏—Å–∞–Ω–∏–µ API (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫) |
| `@host` | –•–æ—Å—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ |
| `@BasePath` | –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å API |
| `@schemes` | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (http, https) |

---

### –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –Ω–∞–¥ –º–µ—Ç–æ–¥–∞–º–∏

> **–§–∞–π–ª:** `internal/http/handlers/notes.go`

### –ú–µ—Ç–æ–¥ `ListNotes` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–º–µ—Ç–æ–∫ (—Å—Ç—Ä–æ–∫–∏ 92-114)

```go
// ListNotes –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫.
// @Summary –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫
// @Description –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫
// @Tags notes
// @Produce json
// @Success 200 {array} core.Note "–°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫"
// @Failure 500 {object} ErrorResponse "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
// @Router /notes [get]
func (h *Handler) ListNotes(w http.ResponseWriter, r *http.Request) {
	notes, err := h.Service.ListNotes()
	if err != nil {
		writeError(w, http.StatusInternalServerError, "internal error")
		return
	}
	
	// –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –≤–º–µ—Å—Ç–æ null
	if notes == nil {
		notes = []core.Note{}
	}
	
	w.Header().Set("Content-Type", "application/json")
	_ = json.NewEncoder(w).Encode(notes)
}
```

**–†–∞–∑–±–æ—Ä –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π:**
| –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------|
| `@Summary` | –ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ Swagger UI |
| `@Description` | –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ |
| `@Tags notes` | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ —Å–µ–∫—Ü–∏—é "notes" |
| `@Produce json` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON |
| `@Success 200` | HTTP 200, –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ Note |
| `@Failure 500` | HTTP 500, –æ–±—ä–µ–∫—Ç ErrorResponse |
| `@Router /notes [get]` | GET /notes |

---

### –ú–µ—Ç–æ–¥ `CreateNote` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ (—Å—Ç—Ä–æ–∫–∏ 58-90)

```go
// CreateNote —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É.
// @Summary –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
// @Description –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
// @Tags notes
// @Accept json
// @Produce json
// @Param input body CreateNoteRequest true "–î–∞–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏"
// @Success 201 {object} core.Note "–°–æ–∑–¥–∞–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞"
// @Failure 400 {object} ErrorResponse "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏"
// @Failure 500 {object} ErrorResponse "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
// @Router /notes [post]
func (h *Handler) CreateNote(w http.ResponseWriter, r *http.Request) {
	var input CreateNoteRequest

	if err := json.NewDecoder(r.Body).Decode(&input); err != nil {
		writeError(w, http.StatusBadRequest, "invalid JSON")
		return
	}

	note, err := h.Service.CreateNote(input.Title, input.Content)
	if err != nil {
		if errors.Is(err, service.ErrValidation) {
			writeError(w, http.StatusBadRequest, "title is required")
			return
		}
		writeError(w, http.StatusInternalServerError, "internal error")
		return
	}

	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(http.StatusCreated) // 201
	_ = json.NewEncoder(w).Encode(note)
}
```

**–†–∞–∑–±–æ—Ä –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π:**
| –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------|
| `@Accept json` | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç JSON –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ |
| `@Param input body CreateNoteRequest true` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ body |
| `@Success 201` | HTTP 201 Created |
| `@Router /notes [post]` | POST /notes |

---

### –ú–µ—Ç–æ–¥ `GetNote` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –ø–æ ID (—Å—Ç—Ä–æ–∫–∏ 116-147)

```go
// GetNote –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–º–µ—Ç–∫—É –ø–æ ID.
// @Summary –ü–æ–ª—É—á–∏—Ç—å –∑–∞–º–µ—Ç–∫—É
// @Description –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–º–µ—Ç–∫—É –ø–æ –µ—ë –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É
// @Tags notes
// @Produce json
// @Param id path int true "ID –∑–∞–º–µ—Ç–∫–∏"
// @Success 200 {object} core.Note "–ù–∞–π–¥–µ–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞"
// @Failure 400 {object} ErrorResponse "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID"
// @Failure 404 {object} ErrorResponse "–ó–∞–º–µ—Ç–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
// @Failure 500 {object} ErrorResponse "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
// @Router /notes/{id} [get]
func (h *Handler) GetNote(w http.ResponseWriter, r *http.Request) {
	idStr := chi.URLParam(r, "id")
	id, err := strconv.ParseInt(idStr, 10, 64)
	if err != nil {
		writeError(w, http.StatusBadRequest, "invalid id")
		return
	}

	note, err := h.Service.GetNote(id)
	if err != nil {
		if errors.Is(err, repo.ErrNoteNotFound) {
			writeError(w, http.StatusNotFound, "note not found")
			return
		}
		writeError(w, http.StatusInternalServerError, "internal error")
		return
	}

	w.Header().Set("Content-Type", "application/json")
	_ = json.NewEncoder(w).Encode(note)
}
```

**–†–∞–∑–±–æ—Ä –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π:**
| –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------|
| `@Param id path int true` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `id` –≤ URL path, —Ç–∏–ø int |
| `@Failure 404` | HTTP 404 –µ—Å–ª–∏ –∑–∞–º–µ—Ç–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ |
| `@Router /notes/{id} [get]` | GET /notes/{id} |

---

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏

> **–§–∞–π–ª:** `internal/http/handlers/notes.go` (—Å—Ç—Ä–æ–∫–∏ 26-49)

```go
// CreateNoteRequest –º–æ–¥–µ–ª—å –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏.
// @Description –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏
type CreateNoteRequest struct {
	// –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
	Title string `json:"title" example:"–ú–æ—è –ø–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞"`
	// –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–º–µ—Ç–∫–∏
	Content string `json:"content" example:"–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏..."`
}

// ErrorResponse –º–æ–¥–µ–ª—å –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–æ–π.
// @Description –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏
type ErrorResponse struct {
	// –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
	Error string `json:"error" example:"something went wrong"`
}
```

> **–§–∞–π–ª:** `internal/core/note.go`

```go
// Note ‚Äî –¥–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∑–∞–º–µ—Ç–∫–∏.
// @Description –ó–∞–º–µ—Ç–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
type Note struct {
	// –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–º–µ—Ç–∫–∏
	ID int64 `json:"id" example:"1"`
	// –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏
	Title string `json:"title" example:"–ú–æ—è –∑–∞–º–µ—Ç–∫–∞"`
	// –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–º–µ—Ç–∫–∏
	Content string `json:"content" example:"–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏..."`
	// –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
	CreatedAt time.Time `json:"createdAt" example:"2024-12-08T12:00:00Z"`
	// –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
	UpdatedAt *time.Time `json:"updatedAt,omitempty" example:"2024-12-08T13:00:00Z"`
}
```

**–¢–µ–≥–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö:**
| –¢–µ–≥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----|------------|
| `json:"id"` | –ò–º—è –ø–æ–ª—è –≤ JSON |
| `example:"1"` | –ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è Swagger UI |
| `// –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π` | –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |

---

## 3. –°–∫—Ä–∏–Ω—à–æ—Ç Swagger UI

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8080/docs/
```

> ‚ö†Ô∏è **–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã Swagger UI**

![Swagger UI Screenshot](screenshot_swagger_ui.png)

*–ß—Ç–æ –≤–∏–¥–Ω–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:*
- –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ API
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ `notes`
- –ö–Ω–æ–ø–∫–∞ "Try it out" –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –°—Ö–µ–º—ã –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö (Note, CreateNoteRequest, UpdateNoteRequest, ErrorResponse)

---

## 4. –ö–æ–º–∞–Ω–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ swag CLI

```bash
go install github.com/swaggo/swag/cmd/swag@latest
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```bash
swag init -g cmd/api/main.go -o docs
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `-g cmd/api/main.go` ‚Äî —Ñ–∞–π–ª —Å –≥–ª–∞–≤–Ω—ã–º–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ (@title, @version –∏ —Ç.–¥.)
- `-o docs` ‚Äî –ø–∞–ø–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

```
2025/12/08 22:46:07 Generate swagger docs....
2025/12/08 22:46:07 Generate general API Info, search dir:./
2025/12/08 22:46:08 Generating handlers.CreateNoteRequest
2025/12/08 22:46:08 Generating core.Note
2025/12/08 22:46:08 Generating handlers.ErrorResponse
2025/12/08 22:46:08 Generating handlers.UpdateNoteRequest
2025/12/08 22:46:08 create docs.go at docs/docs.go
2025/12/08 22:46:08 create swagger.json at docs/swagger.json
2025/12/08 22:46:08 create swagger.yaml at docs/swagger.yaml
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ PATH)

```bash
go run github.com/swaggo/swag/cmd/swag@latest init -g cmd/api/main.go -o docs
```

---

## 5. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
notes-api-pz12/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îî‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ + –≥–ª–∞–≤–Ω—ã–µ Swagger-–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ docs/                        # ‚Üê –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ docs.go                  # Go-–ø–∞–∫–µ—Ç –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ swagger.json             # OpenAPI 2.0 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (JSON)
‚îÇ   ‚îî‚îÄ‚îÄ swagger.yaml             # OpenAPI 2.0 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (YAML)
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ note.go              # –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å Note + –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ note_service.go  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ http/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notes.go         # HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ + Swagger-–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ router.go            # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è + Swagger UI middleware
‚îÇ   ‚îî‚îÄ‚îÄ repo/
‚îÇ       ‚îî‚îÄ‚îÄ note_mem.go          # In-memory —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îî‚îÄ‚îÄ README.md
```

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `cmd/api/main.go` | –ì–ª–∞–≤–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ API (@title, @version, @host, @BasePath) |
| `internal/http/handlers/notes.go` | –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (@Summary, @Router –∏ —Ç.–¥.) |
| `internal/core/note.go` | –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ (@Description, example) |
| `docs/docs.go` | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Go-–ø–∞–∫–µ—Ç (–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ main.go) |
| `docs/swagger.json` | OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è Swagger UI |

---

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|-----------|--------|----------|
| Go | 1.22+ | `go version` |
| Git | –ª—é–±–∞—è | `git --version` |

### –®–∞–≥ 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repo-url>
cd notes-api-pz12
```

### –®–∞–≥ 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
go mod download
```

### –®–∞–≥ 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–µ—Å–ª–∏ docs/ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å swag (–æ–¥–∏–Ω —Ä–∞–∑)
go install github.com/swaggo/swag/cmd/swag@latest

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
swag init -g cmd/api/main.go -o docs
```

### –®–∞–≥ 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
go run ./cmd/api
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è:

```
2024/12/08 12:00:00 Server started at :8080
2024/12/08 12:00:00 Swagger UI: http://localhost:8080/docs/
```

### –®–∞–≥ 5. –û—Ç–∫—Ä—ã—Ç–∏–µ Swagger UI

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:8080/docs/
```

---

## –î–æ—Å—Ç—É–ø–Ω—ã–µ URL-–∞–¥—Ä–µ—Å–∞

| URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| http://localhost:8080/health | Healthcheck (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `OK`) |
| http://localhost:8080/docs/ | Swagger UI ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| http://localhost:8080/docs/doc.json | OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON |
| http://localhost:8080/api/v1/notes | API –∑–∞–º–µ—Ç–æ–∫ |

---

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ curl

```bash
# –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
curl -X POST http://localhost:8080/api/v1/notes \
  -H "Content-Type: application/json" \
  -d '{"title": "–ü–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞", "content": "–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏"}'

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏
curl http://localhost:8080/api/v1/notes

# –ü–æ–ª—É—á–∏—Ç—å –∑–∞–º–µ—Ç–∫—É –ø–æ ID
curl http://localhost:8080/api/v1/notes/1

# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É
curl -X PATCH http://localhost:8080/api/v1/notes/1 \
  -H "Content-Type: application/json" \
  -d '{"title": "–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫"}'

# –£–¥–∞–ª–∏—Ç—å –∑–∞–º–µ—Ç–∫—É
curl -X DELETE http://localhost:8080/api/v1/notes/1
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PowerShell (Windows)

```powershell
# –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
$body = @{ title = "–ü–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞"; content = "–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏" } | ConvertTo-Json
Invoke-RestMethod -Uri "http://localhost:8080/api/v1/notes" -Method POST -ContentType "application/json" -Body $body

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏
Invoke-RestMethod -Uri "http://localhost:8080/api/v1/notes"

# –ü–æ–ª—É—á–∏—Ç—å –∑–∞–º–µ—Ç–∫—É –ø–æ ID
Invoke-RestMethod -Uri "http://localhost:8080/api/v1/notes/1"
```

---

## 6. –í—ã–≤–æ–¥—ã

### ‚úÖ –ß—Ç–æ —É–¥–∞–ª–æ—Å—å

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π REST API** —Å CRUD-–æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –¥–ª—è –∑–∞–º–µ—Ç–æ–∫
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω code-first –ø–æ–¥—Ö–æ–¥** ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –≤ –∫–æ–¥–µ
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `swag init`
4. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Swagger UI** –ø–æ –∞–¥—Ä–µ—Å—É `/docs/`
5. **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏ (core, http, repo)

### üîß –ß—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°–ø–æ—Å–æ–± –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ |
|-----------|----------------------|
| Swagger —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è | `swag init` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `docs/swagger.json` |
| –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –≤ docs | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ Go-—Å—Ç—Ä—É–∫—Ç—É—Ä —Å —Ç–µ–≥–∞–º–∏ |
| –ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π | –¢–µ–≥–∏ `example:"..."` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö |
| Swagger UI | Middleware `http-swagger` |

### üìö –û—Å–Ω–æ–≤–Ω—ã–µ Swagger-–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏

| –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-----------|------------|--------|
| `@Summary` | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ | `@Summary –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫` |
| `@Description` | –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ | `@Description –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫` |
| `@Tags` | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –º–µ—Ç–æ–¥–æ–≤ | `@Tags notes` |
| `@Accept` | –í—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç | `@Accept json` |
| `@Produce` | –í—ã—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç | `@Produce json` |
| `@Param` | –ü–∞—Ä–∞–º–µ—Ç—Ä –∑–∞–ø—Ä–æ—Å–∞ | `@Param id path int true "ID –∑–∞–º–µ—Ç–∫–∏"` |
| `@Success` | –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç | `@Success 200 {object} Note` |
| `@Failure` | –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π | `@Failure 404 {object} ErrorResponse` |
| `@Router` | –ü—É—Ç—å –∏ –º–µ—Ç–æ–¥ | `@Router /notes/{id} [get]` |

### ‚ùì –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã / –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ `docs/` –≤ CI
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è**
   - –î–æ–±–∞–≤–∏—Ç—å `binding:"required"` —Ç–µ–≥–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `go-playground/validator`

3. **OpenAPI 3.0**
   - swag –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ OpenAPI 2.0 (Swagger)
   - –î–ª—è OpenAPI 3.0 –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ogen` –∏–ª–∏ `oapi-codegen`

4. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**
   - –ó–∞–º–µ–Ω–∏—Ç—å in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ PostgreSQL/SQLite

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```
github.com/go-chi/chi/v5 v5.0.12           # HTTP —Ä–æ—É—Ç–µ—Ä
github.com/swaggo/http-swagger/v2 v2.0.2   # Swagger UI middleware
github.com/swaggo/swag v1.16.4             # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (dev)
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π
swag init -g cmd/api/main.go -o docs

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ swag
swag fmt

# –°–æ–±—Ä–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫
go build -o notes-api ./cmd/api

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
go test ./...
```
